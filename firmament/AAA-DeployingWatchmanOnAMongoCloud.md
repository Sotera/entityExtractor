- Substitute mongos for mongo in Watchman's mongo container

The containers provided by mongodb.org are designed to have their startup 
command changed.  So we use the same container for mongos as for mongo.  
However, mongos requires additional configuration information:

1. configuration replicast hosts must be passed on mongos command line
1. hostnames and IPs of all cluster members must be provided in the ExtraHosts collection

NOTE: running mongos on your application server is considered a Mongo best practice:

* (mongodb-performance-best-practices)
[https://www.mongodb.com/collateral/mongodb-performance-best-practices] 
"Use multiple query routers. Use multiple mongos processes spread across 
multiple servers. A common deployment is to co-locate the mongos process on 
application servers, which allows for local communication between the 
application and the mongos process"
* (dba stackexchange discussion)
[http://dba.stackexchange.com/questions/92117/mongodb-co-locate-the-mongos-process-on-application-servers]


- deploy.json CANNOT be used as-is

Because the required configuration information (cluster hosts and IPs) will 
change depending on the deployment, the deploy.json file must be edited before 
deployment.  If the "quick cloud" scripts also present in this directory are 
used to create the cluster, then the mongo section of the deploy.json file 
can be generated by passing 0 as the first parameter to the 
deploy-mongosrv.json.sh script.

- "quick cloud" scripts

This directory contains a collection of scripts for quickly spinning up a 
MongoDB cloud.  All but one of these scripts must be run before deploying
Watchman.

-- Quick Cloud creation steps

1. prepare a VM with 3 bridged network cards
1. configure docker and firmament
1. clone this VM twice, creating 3 identical VMs
1. start the VMs
1. Note the nine IP addresses
1. in each VM: 
   a. mkdir src
   a. cd src
   a. git clone https://github.com/Sotera/watchman.git
   a. cd watchman
   a. git checkout kjemongos
   a. cd watchman/firmament
   a. ./deploy-mongosrv.json.sh \<VM#: 1, 2 or 3\> \<VM1_IP1\> \<VM1_IP2\> ... \<VM3_IP3\><br />e.g.<br />./deploy-mongosrv.json.sh 1 192.168.104.12 192.168.104.57 192.168.104.58 192.168.104.77 192.168.104.73 192.168.104.75 192.168.104.82 192.168.104.88 192.168.104.87
   a. firmament m b deploy-mongosrv-\<VM#\>.json<br />e.g.<br />firmament m b deploy-mongosrv-1.json
1. in VM1:
   a. ./deploy-mongosrv.init-config-repl.sh
   a. ./deploy-mongosrv.init-rs0-repl.sh
   a. ./deploy-mongosrv.init-rs1-repl.sh
1. in VM2:
   a. ./deploy-mongosrv.init-rs2-repl.sh
1. in VM1:
   a. deploy-mongosrv.init-shards.sh
1. On the Watchman deployment box:
   a. ./deploy-mongosrv.json.sh 0 \<VM1_IP1\> \<VM1_IP2\> ... \<VM3_IP3\>
   b. edit depoly.json and replace the mongo block with the contents of the file deploy-mongos.json
   c. Deploy Watchman as usual:<br />firmament m b deploy.json
   d. Define sharding indexes:<br />./deploy-mongosrv.shard-collections.sh
   



