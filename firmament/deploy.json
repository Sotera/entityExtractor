[
  {
    "name": "data-container",
    "Image": "lukewendling/data-container:2",
    "DockerFilePath": "",
    "Hostname": "data-container"
  },
  {
    "name": "redis",
    "Image": "lukewendling/redis-watchman:1",
    "DockerFilePath": "",
    "Hostname": "redis",
    "HostConfig": {
      "PortBindings": {
        "6379/tcp": [
          {
            "HostPort": "6379"
          }
        ]
      }
    }
  },
  {
    "name": "mongo",
    "Image": "jreeme/mongo:2.6",
    "DockerFilePath": "docker/mongo/2.6",
    "Hostname": "mongo",
    "HostConfig": {
      "VolumesFrom": [
        "data-container"
      ],
      "PortBindings": {
        "27017/tcp": [
          {
            "HostPort": "27017"
          }
        ]
      }
    }
  },
  {
    "name": "neuraltalk2",
    "Image": "jacopofar/neuraltalk2-web:latest",
    "DockerFilePath": "",
    "Hostname": "neuraltalk2",
    "Env": [
      "modelPath=/mounted/models/model_id1-501-1448236541.t7_cpu.t7"
    ],
    "HostConfig": {
      "PortBindings": {
        "5000/tcp": [
          {
            "HostPort": "5000"
          }
        ]
      },
      "Binds": [
        "/home/ubuntu/neuraltalk2:/mounted"
      ]
    },
    "Mounts": [
      {
        "Source": "/home/ubuntu/neuraltalk2",
        "Destination": "/mounted",
        "Mode": "",
        "RW": true
      }
    ]
  },
  {
    "name": "mitie",
    "Image": "lukewendling/mitie-server",
    "DockerFilePath": "",
    "Hostname": "mitie",
    "HostConfig": {
      "PortBindings": {
        "8888/tcp": [
          {
            "HostPort": "8888"
          }
        ]
      }
    }
  },
  {
    "name": "fee",
    "Image": "cschulze/fee_redis",
    "DockerFilePath": "",
    "Hostname": "fee",
    "HostConfig": {
      "VolumesFrom": [
        "data-container"
      ],
      "Links": [
        "redis:redis"
      ]
    }
  },
  {
    "name": "watchman",
    "Image": "jreeme/sljava",
    "DockerFilePath": "docker/strong-pm-java8",
    "Hostname": "watchman",
    "ExposedPorts": {
      "3001/tcp": {}
    },
    "HostConfig": {
      "VolumesFrom": [
        "data-container"
      ],
      "Links": [
        "mongo:mongo",
        "mitie:mitie",
        "neuraltalk2:neuraltalk2",
        "redis:redis"
      ],
      "PortBindings": {
        "3001/tcp": [
          {
            "HostPort": "3003"
          }
        ],
        "8701/tcp": [
          {
            "HostPort": "8701"
          }
        ]
      }
    },
    "ExpressApps": [
      {
        "GitUrl": "https://github.com/Sotera/watchman.git",
        "GitSrcBranchName": "master",
        "StrongLoopBranchName": "deploy",
        "StrongLoopServerUrl": "http://localhost:8701",
        "ServiceName": "watchman",
        "Scripts":[
          {
            "RelativeWorkingDir":".",
            "Command": "bower",
            "Args":[
              "install",
              "--config.interactive=false"
            ]
          },
          {
            "RelativeWorkingDir": ".",
            "Command": "slc",
            "Args": [
              "ctl",
              "-C",
              "http://localhost:8701",
              "create",
              "watchman"
            ]
          },
          {
            "RelativeWorkingDir": ".",
            "Command": "slc",
            "Args": [
              "ctl",
              "env-set",
              "watchman",
              "NODE_ENV=production"
            ]
          }
        ]
      }
    ]
  },
  {
    "name": "watchman-extractor",
    "Image": "lukewendling/strong-pm:1",
    "DockerFilePath": "",
    "Hostname": "watchman-extractor",
    "ExposedPorts": {
    },
    "HostConfig": {
      "VolumesFrom": [
        "data-container"
      ],
      "Links": [
        "mongo:mongo",
        "mitie:mitie",
        "neuraltalk2:neuraltalk2",
        "redis:redis"
      ],
      "PortBindings": {
        "8701/tcp": [
          {
            "HostPort": "8702"
          }
        ]
      }
    },
    "ExpressApps": [
      {
        "GitUrl": "https://github.com/Sotera/watchman.git",
        "GitSrcBranchName": "master",
        "StrongLoopBranchName": "deploy",
        "StrongLoopServerUrl": "http://localhost:8702",
        "ServiceName": "watchman-extractor",
        "Scripts":[
          {
            "RelativeWorkingDir": ".",
            "Command": "slc",
            "Args": [
              "ctl",
              "-C",
              "http://localhost:8702",
              "create",
              "watchman-extractor"
            ]
          },
          {
            "RelativeWorkingDir": ".",
            "Command": "slc",
            "Args": [
              "ctl",
              "-C",
              "http://localhost:8702",
              "set-size",
              "watchman-extractor",
              "1"
            ]
          },
          {
            "RelativeWorkingDir": ".",
            "Command": "slc",
            "Args": [
              "ctl",
              "-C",
              "http://localhost:8702",
              "env-set",
              "watchman-extractor",
              "NODE_ENV=production",
              "WORKER_SCRIPT=./workers/start-extractor"
            ]
          }
        ]
      }
    ]
  },
  {
    "name": "watchman-tweet-processor",
    "Image": "lukewendling/strong-pm:1",
    "DockerFilePath": "",
    "Hostname": "watchman-tweet-processor",
    "ExposedPorts": {
    },
    "HostConfig": {
      "VolumesFrom": [
        "data-container"
      ],
      "Links": [
        "mongo:mongo",
        "redis:redis"
      ],
      "PortBindings": {
        "8701/tcp": [
          {
            "HostPort": "8703"
          }
        ]
      }
    },
    "ExpressApps": [
      {
        "GitUrl": "https://github.com/Sotera/watchman.git",
        "GitSrcBranchName": "master",
        "StrongLoopBranchName": "deploy",
        "StrongLoopServerUrl": "http://localhost:8703",
        "ServiceName": "watchman-tweet-processor",
        "Scripts":[
          {
            "RelativeWorkingDir": ".",
            "Command": "slc",
            "Args": [
              "ctl",
              "-C",
              "http://localhost:8703",
              "create",
              "watchman-tweet-processor"
            ]
          },
          {
            "RelativeWorkingDir": ".",
            "Command": "slc",
            "Args": [
              "ctl",
              "-C",
              "http://localhost:8703",
              "set-size",
              "watchman-tweet-processor",
              "1"
            ]
          },
          {
            "RelativeWorkingDir": ".",
            "Command": "slc",
            "Args": [
              "ctl",
              "-C",
              "http://localhost:8703",
              "env-set",
              "watchman-tweet-processor",
              "NODE_ENV=production",
              "WORKER_SCRIPT=./workers/tweet-processor",
              "ES_HOST=elasticsearch:9200"
            ]
          }
        ]
      }
    ]
  },
  {
    "name": "watchman-featurizer",
    "Image": "lukewendling/strong-pm:1",
    "DockerFilePath": "",
    "Hostname": "watchman-featurizer",
    "ExposedPorts": {
    },
    "HostConfig": {
      "VolumesFrom": [
        "data-container"
      ],
      "Links": [
        "mongo:mongo",
        "redis:redis"
      ],
      "PortBindings": {
        "8701/tcp": [
          {
            "HostPort": "8704"
          }
        ]
      }
    },
    "ExpressApps": [
      {
        "GitUrl": "https://github.com/Sotera/watchman.git",
        "GitSrcBranchName": "master",
        "StrongLoopBranchName": "deploy",
        "StrongLoopServerUrl": "http://localhost:8704",
        "ServiceName": "watchman-featurizer",
        "Scripts":[
          {
            "RelativeWorkingDir": ".",
            "Command": "slc",
            "Args": [
              "ctl",
              "-C",
              "http://localhost:8704",
              "create",
              "watchman-featurizer"
            ]
          },
          {
            "RelativeWorkingDir": ".",
            "Command": "slc",
            "Args": [
              "ctl",
              "-C",
              "http://localhost:8704",
              "set-size",
              "watchman-featurizer",
              "1"
            ]
          },
          {
            "RelativeWorkingDir": ".",
            "Command": "slc",
            "Args": [
              "ctl",
              "-C",
              "http://localhost:8704",
              "env-set",
              "watchman-featurizer",
              "NODE_ENV=production",
              "WORKER_SCRIPT=./workers/featurizer",
              "ES_HOST=elasticsearch:9200"
            ]
          }
        ]
      }
    ]
  }
]
